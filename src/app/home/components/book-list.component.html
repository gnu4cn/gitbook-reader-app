<ion-fab vertical="bottom" horizontal="start">
    <ion-fab-button color="light" (click)="openAddBookDialog()">
        <ion-avatar>
            <img src="assets/images/book_blank.png" />
        </ion-avatar>
    </ion-fab-button>
</ion-fab>

<ion-grid>
    <ion-row>
        <!-- Books added already -->
        <ion-col *ngFor="let book of sortBy(bookListDisplay, 'name')" sizeXs="12" sizeSm="6" sizeLg="4" sizeXl="4">
            <ion-card>
                <ion-fab vertical="top" horizontal="end">
                    <ion-button color="danger" size="small" (click)="deleteBook(book)">
                        <ion-icon name="close-outline" sizme="small"></ion-icon>
                    </ion-button>
                </ion-fab>
                <ion-grid>
                    <ion-row class="ion-align-items-stretch ion-no-padding">
                        <ion-col size="4">
                            <img src="assets/images/blank-ebook-cover-png-book-cover-transparent-background.png">
                            <!--Book title-->
                            <ion-card-header>
                                <ion-card-title style="font-size: 12px;">{{ book.name }}</ion-card-title>
                            </ion-card-header>

                            <ion-fab vertical="center" horizontal="center" *ngIf="book.downloaded === 100">
                                <ion-fab-button color="light" (click)="openBook(book)">
                                    <ion-icon name="book-outline" size="large"></ion-icon>
                                </ion-fab-button>
                            </ion-fab>

                            <ion-fab vertical="center" horizontal="center" 
                                *ngIf="book.downloaded === 0&&book.downloadable === true">
                                <ion-fab-button color="light" (click)="startDownload(book)">
                                    <ion-icon name="cloud-download-outline"></ion-icon>
                                </ion-fab-button>
                            </ion-fab>

                            <div *ngIf="book.downloaded>0 && book.downloaded<100" class="downloading-progress">
                                下载中...{{book.downloaded}}%
                            </div>
                        </ion-col>

                        <ion-col class="ion-no-margin">
                            <ion-item-divider>
                                <ion-label>作者</ion-label>
                            </ion-item-divider>

                            <!-- Book writer-->
                            <ion-item class="ion-activated" lines="none">
                                <ion-avatar>
                                    <img src="assets/images/avatar.png" />
                                </ion-avatar>
                                <ion-title>{{ book.writer.name }}</ion-title>
                            </ion-item>

                            <ion-item-divider>
                                <ion-label>类别</ion-label>
                            </ion-item-divider>

                            <!-- Book categories-->
                            <ion-item lines="none">
                                <ion-chip *ngFor="let cat of book.cateList" size="small">
                                    <ion-label (click)="queryCatName()">{{ cat.name }}</ion-label>
                                    <ion-icon *ngIf="book.cateList.length > 1" name="close-circle" (click)="removeCate()">
                                    </ion-icon>
                                </ion-chip>
                            </ion-item>

                        </ion-col>
                    </ion-row>
                    <ion-row *ngIf="book.errMsg !== ''">
                        <ion-col>
                            <ion-item-divider>
                                <ion-text color="danger">
                                    <ion-icon name="alert-circle-outline"></ion-icon>{{ book.errMsg }} - 建议删除
                                </ion-text>
                            </ion-item-divider>
                        </ion-col></ion-row>
                </ion-grid>
            </ion-card>
        </ion-col>
    </ion-row>
</ion-grid>
